configurable:

spells that you are looking out for
spells that you are willing to provide (not reserved)

maintain list of available CDs

FEATURES:

register for spell CD updates
manual-call mode--checks and displays a menu of players with available actions
  which you may call them from or just close the menu after calling them with
  other means
spell reserves -- ignore requests if you want to reserve your spell for a certain strategy


------------
PROTOCOL:

two ways to ask for a cd
for cds that are shared via STATUS messages, these can be asked for directly with GIVE
otherwise, CHECK/READY is used to populate a request list, and then followed by GIVE
can also just do CHECK/READY without the GIVE part for when you just want to check
if a certain spell or item is usable without calling for it.

For WHISPER messages, these may also be sent with RAID, but with a "tar" field set
with the intended target's GUID. This is for cross-realm compatibility.

<request id> is used to filter bad messages, it's generated by the sender and mirrored
  in responses. its mainly to filter lagged messages that may interfere with future
  requests.
  
"Spells" means either actual spells or item effects.

CHECK (RAID) - Check for spells.
{
	rid  = <request_id>
	ids  = {list of spells to check for}
	item = true if this is an item request, omitted/nil if not
}

READY (WHISPER) - We have a spell available, requested by CHECK.
{
	rid = <mirrored request_id>
	id  = spell or item id we have available.
	      (according to the CHECK message, what kind of id it is)
}

GIVE (WHISPER) - Ask for a cd.
{
	rid = <request_id>
	buff = true/false, if the spell or item is to be cast on us or just used.
	id   = the desired item or spell we want them to cast
	item = true if this is an item request, omitted/nil if not
	msg  = a custom message to show with the request
}

NO (WHISPER) - Decline a cd request.
     this is issued when we are busy with a request already,
     when the cd is on cooldown, or reserved.
{
	rid  = <mirrored request_id>
	time = if this is set, the cd was on cooldown and this is the number of seconds remaining until its available
}

STATUS (RAID) - Update raid with status
{
	cds = { -- available CDs
		
		cds is a simple array of integers, each entry consist of a tuple of 4 integers
		
		spellid, duration, charges, max_charges, time 
		 
		spellid     = spell id 
		duration    = the duration of the spell's cooldown (seconds)
		max_charges = the maximum amount of charges we can have
	}
	sub = {
		-- list of spell IDs that we are interested in tracking (subscribing to), this is hard limited to 16 ids
	}
	
	spellserial = serial number that changes if the player changes their spell list
	subserial   = serial number that changes if the player changes their sub list
	
	ver = delleren addon version
	
	poll = true if we want everyone to send a status message
}

PING (RAID)
{
	-- an empty message that refreshes a player's ping time and gives serial numbers
	
	spellserial = serial number that changes if the player changes their spell list
	subserial   = serial number that changes if the player changes their sub list
	
	ver = delleren addon version
}

spells that are "subscribed" allow players to access them faster by directly 
calling for them rather than doing a CHECK first. A spell is registered for
status updates when a single player in a party includes it in their "sub" list 
in their STATUS messages.

STATUS is sent when:
a player joins a party (sent by the joining player, with poll=true to refresh everyone else)		event=GROUP_JOINED
a player reloads their ui (sent by the reloaded player, with poll=true to refresh everyone else)	run in OnEnable
a player's subscribed spell list changes								
   this may cause a sequence of status messages, for example:
     player2 sends status, nothing changes
     player1 sends status, player2 receives a spellid that is currently not "subscribed" to
     player2 sends another status with the info on the new spellid, that is, if they
      know the spell
when talents or spec is changed  

when a status update is triggered by another player, wait 5 seconds before issuing the status message
as to prevent abuse and possibly combine some future status update requests into one.

-----


indicator colors:
 blue       : asking for cd               initialize sound
 green+fade : cd received
 red+fade   : failed to get a cd          fail sound
---
requests:
 orange+flash : cd request                obnoxious sound
 green+fade   : given					    good sound
 red+fade     : timed out! bad raider!    fail sound


 --------------------
 DELLEREN CALL COMMAND
 
/call {spell ids} [-p {player list}] [-i] [-m] [-c] [-e id]

{spell ids} = list of spell IDs to ask for, separated by spaces
-p starts a player listing, spells will be asked from the players listed in descending order
and only from unlisted players if there is a * present ie

 llanna migs delleren *  -- will try to get one from llanna, then migs, then delleren, then whoever
                            if the * isnt there then it will cancel the operation if the three dont
			    satisfy the request
			    
-i turns the query into an item request, so the spell ids are instead item ids
-m turns it into a manual request, which opens a menu with ready players rather than
   asking automatically
-c tells the query to not expect a buff to be cast on us, only for the player to use the spell
   this is assumed for item requests
-e causes the command to only work during a certain encounter (with the given id)
   multiple call commands can be put into a single macro, but only one command can be executed at a time
   